<!DOCTYPE html>
<html lang="ko" xml:lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>아동&middot;청소년&middot;청년 데이터 통합검색</title>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>

    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Regular.woff2}" type="font/woff2"/>
    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Medium.woff2}" type="font/woff2"/>
    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Bold.woff2}" type="font/woff2"/>
    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Light.woff2}" type="font/woff2"/>

    <link rel="icon" th:href="@{/images/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/style.css}" type="text/css"/>
</head>

<body>
<div id="wrap">
    <div th:replace="~{fragments/sidenav :: sideNav}"></div>
    <div class="content-wrap">
        <!-- 모바일 헤더 -->
        <header class="m-header mo">
            <button class="btn-menu">메뉴</button>
        </header>

        <div id="mainContent">
            <h1>아동&middot;청소년&middot;청년 데이터 통합검색</h1>
            <div class="filter-container">
                <div class="filter-header">
                    <h2>검색 필터</h2>
                    <hr/>
                </div>
                <div class="filter-row">
                    <div class="filter-group2">
                        <label for="keyword">검색어</label>
                        <input id="keyword" placeholder="문항내용 키워드를 입력해주세요." type="text"/>
                        <button type="button">
                            <img alt="검색" th:src="@{/images/ico_search.png}"/>
                        </button>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="survey">조사 종류</label>
                        <select id="survey">
                            <option value="">전체</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="order">기수명</label>
                        <select id="order">
                            <option value="">전체</option>
                        </select>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="year1">설문연도</label>
                        <label for="year2" style="display: none">설문종료연도</label>
                        <div class="year-group">
                            <select id="year1">
                                <option value="">전체</option>
                            </select>
                            <span>~</span>
                            <select id="year2">
                                <option value="">전체</option>
                            </select>
                        </div>
                    </div>

                    <div class="filter-group">
                        <label for="respondent">응답주체</label>
                        <select id="respondent">
                            <option value="">전체</option>
                        </select>
                    </div>
                </div>
                <div class="btn-container">
                    <button class="btn-reset">초기화</button>
                    <button class="btn-search">조회</button>
                </div>
            </div>
            <div id="api-url-container" class="api-url-wrap" style="display: none;">
                <label for="api-url-display">API 호출 예시 (공공데이터포털 URL)</label>
                <div class="api-url-content">
                    <input id="api-url-display" type="text" disabled readonly>
                    <button id="copy-btn" type="button" class="copy-btn" aria-label="Copy to clipboard">
                        <svg class="w-4 h-4 text-blue-700" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20">
                            <path d="M16 1h-3.278A1.992 1.992 0 0 0 11 0H7a1.993 1.993 0 0 0-1.722 1H2a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2Zm-3 14H5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-4H5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-5H5a1 1 0 0 1 0-2h2V2h4v2h2a1 1 0 1 1 0 2Z"/>
                        </svg>
                        <span id="copy-feedback" class="copy-feedback-message">복사완료!</span>
                    </button>
                </div>
            </div>
            <div class="result-wrap">
                <div class="filter">
                    <div class="count">총&nbsp;<span id="total-count">0</span>건</div>
                    <div>
                        <label for="page-size-select" style="display: none">페이지당 표시 수</label>
                        <select id="page-size-select" name="page-size">
                            <option value="5">5개씩 보기</option>
                            <option selected value="10">10개씩 보기</option>
                            <option value="15">15개씩 보기</option>
                        </select>
                    </div>
                </div>
                <div class="table-wrap">
                    <table class="tbl-sty01" id="results-table">
                        <caption class="sr-only">아동&middot;청소년&middot;청년 데이터 통합검색 결과</caption>
                        <colgroup>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                            <col/>
                        </colgroup>
                        <thead>
                        <tr>
                            <th scope="col">No.</th>
                            <th scope="col">개방자료코드</th>
                            <th scope="col">출력자료구분명</th>
                            <th scope="col">코호트명</th>
                            <th scope="col">기수명</th>
                            <th scope="col">설문연도</th>
                            <th scope="col">설문조사차수</th>
                            <th scope="col">응답주체명</th>
                            <th scope="col">출력범주명</th>
                            <th scope="col">설문문항아이디</th>
                            <th scope="col">코드북문항내용</th>
                            <th scope="col">
                                <div>다운로드</div>
                                <span>코드북</span>
                                <span>응답값</span>
                            </th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <!-- pc 페이지네이션 -->
                <div class="pagination-wrap pc">
                    <div class="pagination"></div>
                </div>
                <!-- 모바일 페이지네이션 -->
                <div class="pagination-wrap mo">
                    <div class="pagination"></div>
                </div>
            </div>
        </div>
        <footer>
            <p>
                세종특별자치시 시청대로370 세종국책연구단지 사회정책동(D동)
                한국청소년정책연구원 6/7층
            </p>
        </footer>
    </div>
</div>
<div class="dim"></div>

<!-- 로딩 스피너 -->
<!-- <div id="loading" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; display: flex; flex-direction: column; align-items: center;">
    <img th:src="@{/images/loading.gif}" alt="로딩 중" style="width: 50px; height: 50px" />
    <span style="margin-top: 10px; font-size: 14px; font-weight: light">Loading</span>
</div> -->

<script th:src="@{/js/common/sidenav.js}"></script>
<script th:src="@{/js/AoePlcyRscrWholInfo.js}" type="text/javascript"></script>
<script th:inline="javascript">
    fetch("/api/filter")
        .then(response => {
            if (!response.ok) {
                throw new Error("데이터 조회에 실패했습니다.\n잠시 후 다시 시도해주세요.");
            }
            return response.json();
        })
        .then(data => {
            initializeFilters(data);
        })
        .catch(error => {
            console.error("검색 중 오류 발생:", error);
        });
</script>
</body>

</html>

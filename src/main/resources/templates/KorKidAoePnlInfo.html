<!DOCTYPE html>
<html lang="ko" xml:lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>한국아동&middot;청소년패널조사</title>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Regular.woff2}" type="font/woff2" />
    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Medium.woff2}" type="font/woff2" />
    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Bold.woff2}" type="font/woff2" />
    <link as="font" crossorigin="anonymous" rel="preload" th:href="@{/fonts/NotoSansKR-Light.woff2}" type="font/woff2" />

    <link rel="stylesheet" th:href="@{/css/style.css}" type="text/css" />
</head>

<body>
    <div id="wrap">
        <div th:replace="~{fragments/sidenav :: sideNav}"></div>
        <div class="content-wrap">
            <!-- 모바일 헤더 -->
            <header class="m-header mo">
                <button class="btn-menu">메뉴</button>
            </header>

            <div id="mainContent">
                <h1>한국아동&middot;청소년패널조사</h1>
                <div class="filter-container">
                    <div class="filter-header">
                        <h2>검색 필터</h2>
                        <hr>
                    </div>
                    <div class="filter-row">
                        <div class="filter-group">
                            <label for="year">설문연도</label>
                            <select id="year">
                                <option value="">선택</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="respondent">응답주체</label>
                            <select disabled id="respondent">
                                <option value="">선택</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-row">
                        <div class="filter-group category-group">
                            <span class="form-item-label">카테고리</span>
                            <div class="category-selects">
                                <div class="filter-group">
                                    <label for="category-major">대분류</label>
                                    <select disabled id="category-major">
                                        <option value="">선택</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label for="category-medium">중분류</label>
                                    <select disabled id="category-medium">
                                        <option value="">선택</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label for="category-minor">소분류</label>
                                    <select disabled id="category-minor">
                                        <option value="">선택</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label for="category-detailed">세분류</label>
                                    <select disabled id="category-detailed">
                                        <option value="">선택</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label for="question">문항</label>
                                    <select disabled id="question">
                                        <option value="">선택</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-row">
                        <div class="filter-group">
                            <span class="form-item-label">배너변수</span>
                            <div class="checkbox-group">
                                <label for="gender">성별</label>
                                <input id="gender" name="banner-variable" type="checkbox">
                                <label for="age">연령</label>
                                <input id="age" name="banner-variable" type="checkbox">
                                <label for="region">지역</label>
                                <input id="region" name="banner-variable" type="checkbox">
                            </div>
                        </div>
                    </div>
                    <div class="btn-container">
                        <button class="btn-reset">초기화</button>
                        <button class="btn-search">조회</button>
                    </div>
                </div>
                <div class="result-wrap">
                    <div class="filter">
                        <div class="count">총&nbsp;<span id="total-count">0</span>건</div>
                        <div>
                            <label for="page-size-select" style="display: none">페이지사이즈선택</label>
                            <select id="page-size-select" name="page-size">
                                <option value="5">5개씩 보기</option>
                                <option selected value="10">10개씩 보기</option>
                                <option value="15">15개씩 보기</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-wrap">
                        <table class="tbl-sty01" id="results-table">
                            <caption></caption>
                            <colgroup>
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                                <col />
                            </colgroup>
                            <thead>
                                <tr>
                                    <th scope="col">개방일련번호</th>
                                    <th scope="col">코호트명</th>
                                    <th scope="col">설문연도</th>
                                    <th scope="col">설문조사차수</th>
                                    <th scope="col">응답주체명</th>
                                    <th scope="col">출력범주명</th>
                                    <th scope="col">설문배너변수내용</th>
                                    <th scope="col">설문배너분류코드</th>
                                    <th scope="col">설문문항아이디</th>
                                    <th scope="col">코드북문항내용</th>
                                    <th scope="col">응답값</th>
                                    <th scope="col">응답명</th>
                                    <th scope="col">인공지능생성여부</th>
                                    <th scope="col">사례수</th>
                                    <th scope="col">빈도비율</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <!-- pc 페이지네이션 -->
                    <div class="pagination-wrap pc">
                        <div class="pagination"></div>
                    </div>
                    <!-- 모바일 페이지네이션 -->
                    <div class="pagination-wrap mo">
                        <div class="pagination"></div>
                    </div>
                </div>
            </div>
            <footer>
                <p>세종특별자치시 시청대로370 세종국책연구단지 사회정책동(D동) 한국청소년정책연구원 6/7층</p>
            </footer>
        </div>
    </div>
    <div class="dim"></div>

    <!-- 로딩 스피너 -->
    <!-- <div id="loading" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; display: flex; flex-direction: column; align-items: center;">
        <img th:src="@{/images/loading.gif}" alt="로딩 중" style="width: 50px; height: 50px" />
        <span style="margin-top: 10px; font-size: 14px; font-weight: light">Loading</span>
    </div> -->

    <script th:src="@{/js/common/sidenav.js}"></script>
    <script th:src="@{/js/common/filter.js}"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/

        // 1. 이 페이지의 필터 구성을 정의합니다.
        const pageFilterConfig = {
            selects: [
                { key: "year", elementId: "year", data: "yearData", paramName: "srvyYr" },
                { key: "respondent", elementId: "respondent", data: "respondentData", paramName: "rspnsMnbdNm" },
                { key: "categoryMajor", elementId: "category-major", data: "categoryMajorData", excludeFromParams: true },
                { key: "categoryMedium", elementId: "category-medium", data: "categoryMediumData", excludeFromParams: true },
                { key: "categoryMinor", elementId: "category-minor", data: "categoryMinorData", excludeFromParams: true },
                { key: "categoryDetailed", elementId: "category-detailed", data: "categoryDetailedData", excludeFromParams: true },
                { key: "questionId", elementId: "question", data: "questionData", paramName: "srvyQitemId" }
            ],
            bannerVariables: [
                { elementId: 'gender', paramName: 'svbnClsfCd01', paramValue: 'BANN020200' },
                { elementId: 'age', paramName: 'svbnClsfCd02', paramValue: 'BANN020300' },
                { elementId: 'region', paramName: 'svbnClsfCd03', paramValue: 'BANN020400' }
            ]
        };

        // 2. Thymeleaf로부터 pre-processed 데이터를 가져옵니다.
        const processedData = /*[[${data}]]*/ null;

        // 3. 검색 실행 시 호출될 콜백 함수를 정의합니다.
        function performSearch(selectedValues) {
            console.log("다음 값으로 검색을 수행합니다:", selectedValues);
            // TODO: selectedValues 객체를 사용하여 API 요청 로직을 추가하세요.
        }

        // 4. 필터를 초기화합니다.
        initializeFilters(pageFilterConfig, processedData, performSearch);

        /*]]>*/
    </script>
</body>

</html>
